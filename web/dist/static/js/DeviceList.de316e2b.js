(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["DeviceList"],{"0a87":function(e,t,a){"use strict";var i=a("6f9e"),l=a.n(i);l.a},"2c95":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 远程监控\n            ")]),a("el-breadcrumb-item",[e._v("设备列表")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"product-status"},[a("div",[a("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"请输入设备名称/序列号搜索"},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")])],1),a("div",[a("el-button",{attrs:{icon:"el-icon-delete",plain:""}},[e._v("批量删除")]),a("el-upload",{ref:"abc",staticClass:"upload-demo",staticStyle:{display:"inline-block"},attrs:{action:"","on-change":e.handleChange,"on-exceed":e.handleExceed,limit:e.limitUpload,accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","auto-upload":!1,"show-file-list":!1}},[a("el-button",{attrs:{plain:"",icon:"el-icon-upload2"}},[e._v("导入设备")])],1),a("download-excel",{staticStyle:{display:"inline-block"},attrs:{plain:"",icon:"el-icon-upload2",data:e.json_data,fields:e.json_fields,name:"UserInfo"}},[a("el-button",{attrs:{plain:"",icon:"el-icon-upload2"}},[e._v("模板下载")])],1),a("el-button",{attrs:{plain:"",type:"primary",icon:"el-icon-circle-plus-outline"}},[e._v("创建设备")])],1)])]),a("el-table",{ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange,"cell-click":e.showMore}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"DeviceID",label:"设备ID"}}),a("el-table-column",{attrs:{prop:"DeviceName",label:"设备名称"}}),a("el-table-column",{attrs:{prop:"DeviceClass",label:"设备序列号"}}),a("el-table-column",{attrs:{prop:"DeviceClass",label:"品牌"}}),a("el-table-column",{attrs:{prop:"Model",label:"型号"}}),a("el-table-column",{attrs:{prop:"SerialNumber",label:"产线"}}),a("el-table-column",{attrs:{prop:"CustomerName",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"Duration",label:"设备状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"开机"===t.row.switch?"success":"关机"===t.row.switch?"danger":""}},[e._v(e._s(t.row.switch))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("div",[a("router-link",{staticClass:"el-icon-delete-solid",attrs:{to:{path:"/MeasuringPointDetails",query:{id:e}}}}),a("i",{staticClass:"el-icon-s-order"}),a("i",{staticClass:"el-icon-s-tools"})],1)]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.pageTotal},on:{"current-change":e.handlePageChange}})],1)],1),a("el-dialog",{attrs:{title:"编辑",visible:e.editVisible,width:"30%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"用户名"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEdit}},[e._v("确 定")])],1)],1)],1)},l=[],n=(a("34ef"),a("6762"),a("7f7f"),{name:"EquipmentMonitoring",data:function(){return{json_fields:{User_Name:"name",City:"info.city",phone:{field:"phone.landline",callback:function(e){return"Landline Phone - ".concat(e)}},remark:{field:"info.remark",callback:function(e){return"Reamrk:  ".concat(e)}}},json_data:[{name:"张三",info:{city:"New York",country:"EN",remark:"测试1"},phone:{mobile:"1",landline:"11"}},{name:"李四",info:{city:"BeiJing",country:"CN",remark:"测试2"},phone:{mobile:"2",landline:"22"}},{name:"王二",info:{city:"Nanjing",country:"CN",remark:"测试3"},phone:{mobile:"3",landline:"33"}}],json_meta:[[{" key ":" charset "," value ":" utf- 8 "}]],visible:!1,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},value1:"",value2:"",query:{address:"",name:"",pageIndex:1,pageSize:10},tableData:[],multipleSelection:[],delList:[],editVisible:!1,pageTotal:0,form:{},idx:-1,id:-1,limitUpload:1,fileTemp:null,file:null,da:[],dalen:0}},created:function(){this.getData()},methods:{getData:function(){var e=this;axios({method:"get",url:"/fetchEquipment"}).then((function(t){window.console.log(t),200===t.status?(e.tableData=t.data,e.pageTotal=t.data.length,window.console.log(t.data)):window.console.log("服务器错误")}))},handleSearch:function(){this.$set(this.query,"pageIndex",1),this.getData()},handleDelete:function(e,t){var a=this;this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){a.$message.success("删除成功"),a.tableData.splice(e,1)})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){var e=this.multipleSelection.length,t="";this.delList=this.delList.concat(this.multipleSelection);for(var a=0;a<e;a++)t+=this.multipleSelection[a].name+" ";this.$message.error("删除了".concat(t)),this.multipleSelection=[]},handleEdit:function(e,t){this.idx=e,this.form=t,this.editVisible=!0},saveEdit:function(){this.editVisible=!1,this.$message.success("修改第 ".concat(this.idx+1," 行成功")),this.$set(this.tableData,this.idx,this.form)},handlePageChange:function(e){this.$set(this.query,"pageIndex",e),this.getData()},showMore:function(e,t,a,i){var l,n=["主机温度(℃)","水箱温度(℃)","进口温度(℃)","出口温度(℃)","压力","压差","电机转速(转/分)","电流(A)","主油箱液位(mm)","主油箱温度(℃)","供油管路温度(℃)","紧急过滤器压差","双筒过滤器压差","高位油箱液位(mm)","控制油压力","润滑油出口压力","电机泵组震动","电机电流","主油箱油品分析","运行时长(h)"];if(l=n.includes(t.label),!l)return!1;this.$router.push({path:"/MeasuringPointDetails",query:{type:t.property,id:e.DeviceID,label:t.label,row:e}})},handleChange:function(e,t){this.fileTemp=e.raw,this.fileTemp?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==this.fileTemp.type||"application/vnd.ms-excel"==this.fileTemp.type?(this.importfxx(this.fileTemp),this.$refs["abc"].clearFiles()):this.$message({type:"warning",message:"附件格式错误，请删除后重新上传！"}):this.$message({type:"warning",message:"请上传附件！"})},handleExceed:function(){this.$message({type:"warning",message:"超出最大上传文件数量的限制！"})},importfxx:function(e){var t=this;this.$refs.inputer;this.file=event.currentTarget.files[0];var i=!1,l=this.file,n=new FileReader;FileReader.prototype.readAsBinaryString=function(e){var i,l,n="",s=!1,o=new FileReader;o.onload=function(e){for(var r=new Uint8Array(o.result),c=r.byteLength,d=0;d<c;d++)n+=String.fromCharCode(r[d]);var u=a("1146");i=s?u.read(btoa(fixdata(n)),{type:"base64"}):u.read(n,{type:"binary"}),l=u.utils.sheet_to_json(i.Sheets[i.SheetNames[0]]),console.log("未处理的原始数据如下："),console.log(l);var p=[];return l.map((function(e){var t={};t.code=e["Code"],t.name=e["Name"],t.pro=e["province"],t.cit=e["city"],t.dis=e["district"],p.push(t)})),t.da=p,t.dalen=p.length,p},o.readAsArrayBuffer(e)},i?n.readAsArrayBuffer(l):n.readAsBinaryString(l)}}}),s=n,o=(a("0a87"),a("2877")),r=Object(o["a"])(s,i,l,!1,null,"604f21b8",null);t["default"]=r.exports},"6f9e":function(e,t,a){}}]);