(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["map"],{"01c1":function(t,e,n){"use strict";var i=n("5e62"),o=n.n(i);o.a},"0f4e":function(t,e,n){},"165e":function(t,e,n){"use strict";(function(t){n("c5f6");var i=n("2da4"),o=n("4fab"),s=n("76f3");e["a"]={name:"bm-marker",mixins:[Object(i["a"])("overlay")],props:{position:{},offset:{},icon:{},massClear:{type:Boolean,default:!0},dragging:{type:Boolean,default:!1},clicking:{type:Boolean,default:!0},raiseOnDrag:{type:Boolean,default:!1},draggingCursor:{type:String},rotation:{type:Number},shadow:{type:Object},title:{type:String},label:{type:Object},animation:{type:String},top:{type:Boolean,default:!1},zIndex:{type:Number,default:0}},watch:{"position.lng":function(t,e){var n=this.BMap,i=this.originInstance,o=this.position,a=this.renderByParent,r=this.$parent;t!==e&&t>=-180&&t<=180&&i.setPosition(Object(s["c"])(n,{lng:t,lat:o.lat})),a&&r.reload()},"position.lat":function(t,e){var n=this.BMap,i=this.originInstance,o=this.position,a=this.renderByParent,r=this.$parent;t!==e&&t>=-74&&t<=74&&i.setPosition(Object(s["c"])(n,{lng:o.lng,lat:t})),a&&r.reload()},"offset.width":function(t,e){var n=this.BMap,i=this.originInstance;t!==e&&i.setOffset(new n.Size(t,this.offset.height))},"offset.height":function(t,e){var n=this.BMap,i=this.originInstance;t!==e&&i.setOffset(new n.Size(this.offset.width,t))},icon:{deep:!0,handler:function(t){var e=this.BMap,n=this.originInstance,i=this.rotation;n&&n.setIcon(Object(s["a"])(e,t)),i&&n&&n.setRotation(i)}},massClear:function(t){t?this.originInstance.enableMassClear():this.originInstance.disableMassClear()},dragging:function(t){t?this.originInstance.enableDragging():this.originInstance.disableDragging()},clicking:function(){this.reload()},raiseOnDrag:function(){this.reload()},draggingCursor:function(t){this.originInstance.setDraggingCursor(t)},rotation:function(t){this.originInstance.setRotation(t)},shadow:function(t){this.originInstance.setShadow(t)},title:function(t){this.originInstance.setTitle(t)},label:function(t){this.reload()},animation:function(e){this.originInstance.setAnimation(t[e])},top:function(t){this.originInstance.setTop(t)},zIndex:function(t){this.originInstance.setZIndex(t)}},methods:{load:function(){var e=this.BMap,n=this.map,i=this.position,a=this.offset,r=this.icon,c=this.massClear,l=this.dragging,u=this.clicking,d=this.raiseOnDrag,h=this.draggingCursor,m=this.rotation,p=this.shadow,g=this.title,f=this.label,v=this.animation,b=this.top,w=this.renderByParent,y=this.$parent,k=this.zIndex,C=new e.Marker(new e.Point(i.lng,i.lat),{offset:a,icon:r&&Object(s["a"])(e,r),enableMassClear:c,enableDragging:l,enableClicking:u,raiseOnDrag:d,draggingCursor:h,rotation:m,shadow:p,title:g});this.originInstance=C,f&&C&&C.setLabel(Object(s["b"])(e,f)),C.setTop(b),C.setZIndex(k),o["a"].call(this,C),w?y.reload():n.addOverlay(C),C.setAnimation(t[v])}}}}).call(this,n("c8ba"))},"1953d":function(t,e,n){"use strict";var i=n("0f4e"),o=n.n(i);o.a},2386:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"maps"}},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-lx-emoji"}),t._v(" 用户地图\n            ")])],1)],1),n("div",[n("el-row",{staticClass:"container"},[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"mapbox"},[n("baidu-map",{staticClass:"map",attrs:{center:"中国","map-click":!1},on:{ready:t.handler}},[n("bml-marker-clusterer",{attrs:{averageCenter:!0}},t._l(t.markers,(function(e,i){return n("div",{key:i},[n("bm-marker",{attrs:{dragging:!0,animation:"BMAP_ANIMATION_BOUNCE",position:{lng:e.lng,lat:e.lat}},on:{click:function(n){return t.infoWindowOpen(e)}}},[n("bm-info-window",{attrs:{title:"设备信息",position:{lng:e.lng,lat:e.lat},show:e.showFlag},on:{close:function(n){return t.infoWindowClose(e)},open:function(n){return t.infoWindowOpen(e)}}},[n("p",[t._v("公司: "+t._s(e.company))]),n("p",[t._v("地址: "+t._s(e.address))]),n("p",[t._v("设备ID: "+t._s(e.deviceId))])])],1)],1)})),0)],1)],1)]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"map-info"},[n("div",{staticClass:"info-one"},[n("p",[t._v(t._s(t.deviceNum))]),n("p",[t._v("设备数量")])]),n("div",{staticClass:"info-two"},[t.status.yxs?n("el-progress",{attrs:{type:"circle",percentage:2*t.status.yxs}}):t._e(),n("div",[n("p",[t._v(t._s(t.status.yxs))]),n("p",[t._v("运行设备数")])])],1),n("div",{staticClass:"info-three"},[t.status.yxs?n("el-progress",{attrs:{type:"circle",percentage:2*(t.deviceNum-t.status.yxs)}}):t._e(),n("div",[n("p",[t._v(t._s(t.deviceNum-t.status.yxs))]),n("p",[t._v("关机设备数")])])],1),n("div",{staticClass:"info-four"},[t.status.yxs?n("el-progress",{attrs:{type:"circle",percentage:2*t.status.djs}}):t._e(),n("div",[n("p",[t._v(t._s(t.status.djs))]),n("p",[t._v("设备故障数")])])],1)])])],1)],1)])},o=[],s=n("bd0c"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._t("default")],2)},r=[],c=n("165e"),l=c["a"],u=n("2877"),d=Object(u["a"])(l,a,r,!1,null,null,null),h=d.exports,m=[{lng:119.946973,lat:31.772752,url:"http://developer.baidu.com/map/jsdemo/img/fox.gif",company:"江苏常州华丽液压润滑设备有限公司",address:"中国 江苏 常州市 三河口",deviceId:"10000093803899",showFlag:!1},{lng:119.946973,lat:31.772752,url:"http://developer.baidu.com/map/jsdemo/img/fox.gif",company:"江苏常州华丽液压润滑设备有限公司",address:"中国 江苏 常州市 三河口",deviceId:"10000093803934",showFlag:!1},{lng:119.946973,lat:31.772752,url:"http://developer.baidu.com/map/jsdemo/img/fox.gif",company:"江苏常州华丽液压润滑设备有限公司",address:"中国 江苏 常州市 三河口",deviceId:"10000093803937",showFlag:!1}],p=[{}],g={name:"maps",data:function(){return{BMap:"",map:"",markers:m,carList:p,show:!1,deviceNum:0,status:{}}},components:{BmlMarkerClusterer:s["BmlMarkerClusterer"],BmMarker:h},computed:{},created:function(){this.fetchDeviceNum(),this.fetchDeviceStatus()},methods:{handler:function(t){var e=t.BMap,n=t.map;n.enableScrollWheelZoom(!0),this.BMap=e,this.map=n,window.console.log(e,n)},infoWindowClose:function(t){t.showFlag=!1,console.log(t)},infoWindowOpen:function(t){t.showFlag=!0,axios({method:"get",url:"getDeviceInfo",query:""}),console.log(t)},fetchDeviceNum:function(){var t=this;axios({method:"get",url:"/fetchDeviceNum"}).then((function(e){t.deviceNum=e.data.data})).catch()},fetchDeviceStatus:function(){var t=this;axios({method:"get",url:"/fetchDeviceStatus"}).then((function(e){t.status=e.data})).catch()}}},f=g,v=(n("01c1"),n("1953d"),Object(u["a"])(f,i,o,!1,null,"e540c3a0",null));e["default"]=v.exports},"2da4":function(t,e,n){"use strict";const i={control:{unload:"removeControl"},layer:{unload:"removeTileLayer"},overlay:{unload:"removeOverlay"},contextMenu:{unload:"removeContextMenu"}},o=t=>t.abstract||t.$el===t.$children[0].$el?o(t.$parent):t;function s(){const{unload:t,renderByParent:e,$parent:n}=this;e&&n.reload(),t()}class a{constructor(t){this.methods={ready(){const t=o(this.$parent),e=this.BMap=t.BMap,n=this.map=t.map;this.load(),this.$emit("ready",{BMap:e,map:n})},transmitEvent(t){this.$emit(t.type.replace(/^on/,""),t)},reload(){this&&this.BMap&&this.$nextTick(()=>{this.unload(),this.$nextTick(this.load)})},unload(){const{map:e,originInstance:n}=this;try{switch(t.type){case"search":return n.clearResults();case"autoComplete":case"lushu":return n.dispose();case"markerClusterer":return n.clearMarkers();default:e[i[t.type].unload](n)}}catch(o){}}},this.computed={renderByParent(){return this.$parent.preventChildrenRender}},this.mounted=function(){const t=o(this.$parent),e=t.map,{ready:n}=this;e?n():t.$on("ready",n)},this.destroyed=s,this.beforeDestroy=s}}e["a"]=t=>new a({type:t})},"4fab":function(t,e,n){"use strict";var i={"bm-map":["click","dblclick","rightclick","rightdblclick","maptypechange","mousemove","mouseover","mouseout","movestart","moving","moveend","zoomstart","zoomend","addoverlay","addcontrol","removecontrol","removeoverlay","clearoverlays","dragstart","dragging","dragend","addtilelayer","removetilelayer","load","resize","hotspotclick","hotspotover","hotspotout","tilesloaded","touchstart","touchmove","touchend","longpress"],"bm-geolocation":["locationSuccess","locationError"],"bm-overview-map":["viewchanged","viewchanging"],"bm-marker":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","infowindowclose","infowindowopen","dragstart","dragging","dragend","rightclick"],"bm-polyline":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-polygon":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-circle":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","lineupdate"],"bm-label":["click","dblclick","mousedown","mouseup","mouseout","mouseover","remove","rightclick"],"bm-info-window":["close","open","maximize","restore","clickclose"],"bm-ground":["click","dblclick"],"bm-autocomplete":["onconfirm","onhighlight"],"bm-point-collection":["click","mouseover","mouseout"]};e["a"]=function(t,e){const n=e||i[this.$options.name];n&&n.forEach(e=>{const n="on"===e.slice(0,2),i=n?e.slice(2):e,o=this.$listeners[i];o&&t.addEventListener(e,o.fns)})}},"5e62":function(t,e,n){},"76f3":function(t,e,n){"use strict";function i(t,e={}){const{lng:n,lat:i}=e;return new t.Point(n,i)}function o(t,e={}){const{width:n,height:i}=e;return new t.Size(n,i)}function s(t,e={}){const{url:n,size:i,opts:s={}}=e;return new t.Icon(n,o(t,i),{anchor:s.anchor&&o(t,s.anchor),imageSize:s.imageSize&&o(t,s.imageSize),imageOffset:s.imageOffset&&o(t,s.imageOffset),infoWindowAnchor:s.infoWindowAnchor&&o(t,s.infoWindowAnchor),printImageUrl:s.printImageUrl})}function a(t,e={}){const{content:n,opts:s}=e;return new t.Label(n,{offset:s.offset&&o(t,s.offset),position:s.position&&i(t,s.position),enableMassClear:s.enableMassClear})}n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}))}}]);